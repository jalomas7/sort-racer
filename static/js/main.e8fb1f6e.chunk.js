(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(14).__exportStar(n(33),t)},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(14).__exportStar(n(38),t)},,,,,,,,,,,,,,function(e,t,n){e.exports=n(45)},,,,,function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(14).__exportStar(n(34),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(14);r.__exportStar(n(35),t),r.__exportStar(n(36),t),r.__exportStar(n(37),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WSEventName=void 0,function(e){e.POSITION_UPDATE="positionUpdate",e.CONNECTED="connected",e.GET_PLAYERS="getPlayers",e.UPDATE_COLUMNS="updateColumns",e.CREATE_PLAYER_STACK="createPlayerStack",e.RESET_GAME="RESET_GAME"}(t.WSEventName||(t.WSEventName={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerStackUpdateTypes=void 0,function(e){e.ADD="add",e.REMOVE="remove"}(t.PlayerStackUpdateTypes||(t.PlayerStackUpdateTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(14).__exportStar(n(39),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createWsEvent=void 0,t.createWsEvent=function(e,t){return JSON.stringify({event:e,data:t})}},,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(21),o=n.n(c),i=n(24),u=n(1),l=(n(32),n(3)),s=n(4),d=n(10),f=n(9),b=n(6),v=n(47),p=n(5),O=n(13),E={players:[],gameWon:!1,declareWinner:function(){},playerStacks:{},ballColors:[],resetGame:function(){},updatePlayerPosition:function(){},getPlayerPosition:function(){return{x:0,y:0}},serverConnection:void 0},j=Object(r.createContext)(E),y=function(){return Object(r.useContext)(j)},m=function(e){var t=e.children,n=Object(r.useState)([]),c=Object(d.a)(n,2),o=c[0],i=c[1],u=Object(r.useState)({}),l=Object(d.a)(u,2),s=l[0],E=l[1],y=Object(r.useState)(!1),m=Object(d.a)(y,2),g=m[0],S=m[1],h=Object(r.useState)(),k=Object(d.a)(h,2),x=k[0],_=k[1],P=Object(r.useState)(),C=Object(d.a)(P,2),M=C[0],T=C[1],W=Object(r.useState)([]),N=Object(d.a)(W,2),A=N[0],I=N[1],w=Object(r.useState)(A.reduce((function(e,t){return Object(b.a)(Object(b.a)({},e),{},Object(f.a)({},t,{x:0,y:0}))}),{})),D=Object(d.a)(w,2),U=D[0],L=D[1];Object(r.useEffect)((function(){L(A.reduce((function(e,t){return Object(b.a)(Object(b.a)({},e),{},Object(f.a)({},t,{x:0,y:0}))}),{}))}),[A]),Object(r.useEffect)((function(){var e=new WebSocket("ws://54.144.66.237:80");return e.addEventListener("open",(function(){var t;e.send((t=Object(v.a)(),Object(O.createWsEvent)(p.WSEventName.CONNECTED,{player:t})))})),e.addEventListener("message",(function(e){try{var t=JSON.parse(e.data);switch(t.event){case p.WSEventName.POSITION_UPDATE:Object.keys(t.data).forEach((function(e){var n=t.data[e],r=n.x,a=n.y;L((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(f.a)({},e,{x:r,y:a}))}))}));break;case p.WSEventName.GET_PLAYERS:I(t.data.players);break;case p.WSEventName.CREATE_PLAYER_STACK:var n=t.data,r=n.stacks,a=n.colors;E(r),i(a)}}catch(c){console.log("not json data")}})),e.addEventListener("close",(function(){console.log("connection closed")})),T(e),function(){M&&(M.close(),T(void 0))}}),[]);var R={players:A,ballColors:o,playerStacks:s,declareWinner:function(e){S(!0),_(e)},gameWon:g,resetGame:function(){S(!1),null===M||void 0===M||M.send(Object(O.createWsEvent)(p.WSEventName.RESET_GAME,{}))},winner:x,updatePlayerPosition:function(e,t,n){L((function(r){return Object(b.a)(Object(b.a)({},r),{},Object(f.a)({},e,{x:t,y:n}))})),M&&M.readyState===M.OPEN&&M.send(function(e,t,n){return Object(O.createWsEvent)(p.WSEventName.POSITION_UPDATE,Object(f.a)({},e,{x:t,y:n}))}(e,t,n))},getPlayerPosition:function(e){return U[e]||{x:0,y:0}},serverConnection:M};return a.a.createElement(j.Provider,{value:R},t)},g=Object(r.createContext)({activeBalls:{},setActiveBalls:function(){},onDrag:function(){},onDrop:function(){}}),S=function(){return Object(r.useContext)(g)},h=function(e){var t=e.children,n=Object(r.useState)({}),c=Object(d.a)(n,2),o=c[0],i=c[1],u=y(),l=u.playerStacks,s=u.declareWinner,v=u.serverConnection,E=Object(r.useCallback)((function(){Object.keys(l).forEach((function(e){var t=!0,n=l[e];Object.keys(n).forEach((function(e){if(!(n[e].balls.length<1)){var r=n[e].balls[0].color;n[e].balls.forEach((function(e){e.color===r||(t=!1)}))}})),t&&s(e)}))}),[l,s]),j=Object(r.useCallback)((function(e,t){if(!(o[t]||Y.length<1)){var n=l[t][e].balls.shift();i(Object(b.a)(Object(b.a)({},o),{},Object(f.a)({},t,n)))}}),[l,o]),m=Object(r.useCallback)((function(e,t){var n=l[t][e].balls,r=o[t];!r||n.length>4||(n.unshift(r),i(Object(b.a)(Object(b.a)({},o),{},Object(f.a)({},t,void 0))),E())}),[l,o,E]),S=Object(r.useCallback)((function(e,t){j(t,e),null===v||void 0===v||v.send(function(e,t){return Object(O.createWsEvent)(p.WSEventName.UPDATE_COLUMNS,{playerId:e,stackId:t,type:p.PlayerStackUpdateTypes.REMOVE})}(e,t))}),[j,v]),h=Object(r.useCallback)((function(e,t){m(t,e),null===v||void 0===v||v.send(function(e,t){return Object(O.createWsEvent)(p.WSEventName.UPDATE_COLUMNS,{playerId:e,stackId:t,type:p.PlayerStackUpdateTypes.ADD})}(e,t))}),[m,v]);Object(r.useEffect)((function(){if(v){var e=function(e){try{var t=JSON.parse(e.data);switch(t.event){case p.WSEventName.UPDATE_COLUMNS:var n=t.data,r=n.type,a=n.playerId,c=n.stackId;r===p.PlayerStackUpdateTypes.ADD?m(c,a):j(c,a)}}catch(o){console.log("error updating stack"),console.log(o)}};return v.addEventListener("message",e),function(){return v.removeEventListener("message",e)}}}),[v,j,m]);var k={activeBalls:o,setActiveBalls:i,onDrag:S,onDrop:h};return a.a.createElement(g.Provider,{value:k},t)},k=n(26);function x(){var e=Object(l.a)(["\n    height: 100%;\n    width: 100%;\n    visibility: ",";\n    background-color: ",";\n    position: absolute;\n    z-index: 1;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return x=function(){return e},e}var _=s.a.div(x(),(function(e){return e.open?"visible":"hidden"}),(function(e){return e.backgroundColor})),P=function(e){var t=e.backgroundColor,n=void 0===t?"transparent":t,r=e.children,c=Object(k.a)(e,["backgroundColor","children"]);return a.a.createElement(_,Object.assign({backgroundColor:n},c),r)},C=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t="0123456789ABCDEF",n="#",r=0;r<6;r++)n=n.concat(t[Math.min(Math.floor(Math.random()*t.length+e),t.length-1)]);return n};function M(){var e=Object(l.a)([""]);return M=function(){return e},e}function T(){var e=Object(l.a)(["\n    outline: none;\n"]);return T=function(){return e},e}function W(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    background: ",";\n    color: ",";\n    padding: 10em;\n"]);return W=function(){return e},e}var N=s.a.div(W(),(function(e){return e.background}),(function(e){return function(e){if(!e)return!1;var t=e.slice(1,e.length);return 6===t.length&&parseInt(t.slice(0,2),16)+parseInt(t.slice(2,4),16)+parseInt(t.slice(4,6),16)<382}(e.background)?"white":"black"})),A=s.a.button(T()),I=s.a.h1(M()),w=function(){var e=y(),t=e.gameWon,n=e.resetGame,c=e.winner,o=Object(r.useState)("transparent"),i=Object(d.a)(o,2),u=i[0],l=i[1];return Object(r.useEffect)((function(){l(C())}),[]),a.a.createElement(P,{open:t,backgroundColor:"rgba(0,0,0,0.8)"},a.a.createElement(N,{background:u},a.a.createElement(I,null,c," wins!!!"),a.a.createElement(A,{onClick:n},"Play Again")))};function D(){var e=Object(l.a)(["\n    left: ","px;\n    top: ","px;\n    border-radius: 100%;\n    background: radial-gradient(circle at 25px 10px, ",", #000);\n    min-width: 50px;\n    min-height: 50px;\n    position: ",";\n    pointer-events: ",";\n"]);return D=function(){return e},e}var U=s.a.div(D(),(function(e){return e.x-25}),(function(e){return e.y-25}),(function(e){return e.color}),(function(e){return e.active?"absolute":"unset"}),(function(e){return e.active?"none":"unset"})),L=function(e){var t,n=e.id,r=e.playerId,c=e.color,o=void 0===c?C():c,i=e.x,u=void 0===i?0:i,l=e.y,s=void 0===l?0:l,d=(null===(t=S().activeBalls[r])||void 0===t?void 0:t.id)===n||!1;return a.a.createElement(U,{color:o,active:d,x:u,y:s})};function R(){var e=Object(l.a)(["\n    width: 100%;\n    height: 250px;\n    border-radius: 10px;\n    background-color: rgba(0, 0, 0, 0.2);\n    position: absolute;\n    bottom: 0;\n    background: linear-gradient(to left, rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.5));\n"]);return R=function(){return e},e}function B(){var e=Object(l.a)(["\n    min-width: 55px;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    position: relative;\n    margin: 0 10px 25% 10px;\n    align-self: flex-end;\n"]);return B=function(){return e},e}var G=s.a.div(B()),J=s.a.div(R()),Y=function(e){var t=e.balls,n=e.playerId,c=e.stackId,o=S(),i=o.onDrag,u=o.onDrop,l=o.activeBalls,s=Object(r.useMemo)((function(){return l[n]}),[n,l]);return a.a.createElement(G,{onMouseDown:function(){return!s&&i(n,c)},onMouseUp:function(){return s&&u(n,c)},onClick:function(){s&&u(n,c)}},a.a.createElement(J,null),t.map((function(e){var t=e.color,r=e.id;return a.a.createElement(L,{color:t,key:r,id:r,playerId:n})})))};function z(){var e=Object(l.a)(["\n    display: flex;\n    background-color: #282c34;\n    min-height: 15em;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n    border: 5px solid white;\n    margin: 0 10px;\n    position: relative;\n"]);return z=function(){return e},e}var F=s.a.div(z()),K=function(e){var t=e.playerId,n=S().activeBalls,c=y(),o=c.playerStacks,i=c.updatePlayerPosition,u=c.getPlayerPosition,l=Object(r.useMemo)((function(){return n[t]}),[t,n]),s=Object(r.useRef)(null);if(!o[t])return a.a.createElement(a.a.Fragment,null);var d=u(t),f=d.x,b=d.y;return a.a.createElement(F,{ref:s,onMouseMoveCapture:function(e){e.preventDefault(),s.current&&i(t,e.clientX-s.current.offsetLeft,e.clientY-s.current.offsetTop)},id:t},Object.keys(o[t]).map((function(e){return a.a.createElement(Y,{balls:o[t][e].balls,key:e,playerId:t,stackId:e})})),l&&a.a.createElement(L,{x:f,y:b,color:l.color,id:l.id,playerId:t}))};function V(){var e=Object(l.a)(["\n    display: flex;\n    background-color: #282c34;\n    min-height: 100vh;\n    align-items: center;\n    justify-content: center;\n    font-size: calc(10px + 2vmin);\n    color: white;\n"]);return V=function(){return e},e}var X=s.a.div(V()),$=function(){var e=y().players;return a.a.createElement(X,null,a.a.createElement(w,null),e.map((function(e){return a.a.createElement(K,{playerId:e,key:e})})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(i.a,{basename:"sort-racer"},a.a.createElement(u.c,null,a.a.createElement(u.a,{exact:!0,path:"/"},a.a.createElement(m,null,a.a.createElement(h,null,a.a.createElement($,null))))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[27,1,2]]]);